<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Resultados ‚Äî Fly Track</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#eaf2f7; --card:#fff; --ink:#0b1e45; --muted:#3a5674; --line:#dfeaf3;
    --primary:#1677c6; --primary-ink:#fff; --accent:#ff5a00; --accent-ink:#fff;
    --chip:#eef6ff; --ok:#2ecc71;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
  .wrap{max-width:1260px;margin:28px auto;padding:0 18px}

  /* layout */
  .grid{display:grid;grid-template-columns:340px 1fr;gap:22px}
  @media (max-width:1000px){ .grid{grid-template-columns:1fr} }

  /* painel lateral */
  .panel{
    background:#0c6aa9; color:#eaf6ff; border-radius:22px; padding:22px;
    border:1px solid rgba(255,255,255,.25);
    box-shadow:0 16px 40px rgba(12,106,169,.18);
  }
  .panel h2{margin:0 0 16px 0; font-size:26px}
  .seg{display:flex;gap:10px;margin:12px 0 18px}
  .seg button{
    border:1px solid rgba(255,255,255,.35); background:transparent; color:#eaf6ff;
    padding:8px 12px; border-radius:999px; cursor:pointer; font-weight:700;
  }
  .seg button.is-active{background:#0aa1ff;border-color:#70d3ff}
  .field{
    background:#e8f4ff; color:#0a2d4e; border:2px solid #cfe6fb; border-radius:14px;
    padding:12px 14px; margin:10px 0; font-weight:700; box-shadow: inset 0 2px 0 rgba(255,255,255,.6);
  }
  .field small{display:block;color:#0a2d4e;font-weight:600;opacity:.85;margin-bottom:6px}
  .swap{float:right; background:#0aa1ff; color:#003253; border-radius:999px; border:0; width:36px; height:36px;
        display:inline-flex; align-items:center; justify-content:center; cursor:pointer; margin-left:6px}
  .toggle{
    display:flex; align-items:center; gap:10px; color:#eaf6ff; margin:16px 0 6px;
  }
  .switch{
    width:46px;height:26px;background:#f6a57f;border-radius:999px;border:2px solid #ffd7c5;position:relative;cursor:pointer;
  }
  .switch::after{
    content:""; position:absolute; left:4px; top:50%; transform:translateY(-50%);
    width:18px; height:18px; border-radius:50%; background:#fff; transition:.2s;
  }
  .switch.is-on{background:#ff5a00}
  .switch.is-on::after{left:22px}

  .panel .btn{
    width:100%; margin-top:14px; display:flex; align-items:center; justify-content:center;
    gap:10px; background:var(--accent); color:var(--accent-ink); border:0; border-radius:18px;
    padding:16px 20px; font-size:20px; font-weight:800; cursor:pointer;
    box-shadow:0 12px 26px rgba(255,90,0,.25);
  }

  /* === Caixinhas de data viram bot√µes clic√°veis === */
  .pill-date{
    position:relative;
    background:#e8f4ff; color:#0a2d4e; border:2px solid #cfe6fb; border-radius:14px;
    padding:10px 12px 12px; font-weight:700; box-shadow: inset 0 2px 0 rgba(255,255,255,.6);
    min-height:68px; cursor:pointer; user-select:none;
  }
  .pill-date small{display:block;color:#0a2d4e;font-weight:600;opacity:.85;margin-bottom:6px}
  .pill-date strong{display:block;font-weight:800}
  .pill-date:focus-visible{ outline:3px solid #bfe0ff; outline-offset:2px; }
  .pill-head{ font-weight:700; opacity:.85; margin-bottom:6px; }
  .pill-value{ font-weight:800; }

  /* input date invis√≠vel sobre a p√≠lula */
  .pill-date__input{
    position:absolute; inset:0; width:100%; height:100%;
    opacity:0; pointer-events:none;
  }

  /* p√≠lula desabilitada (modo S√≥ ida) */
  .pill-date.is-disabled{
    opacity:.55; filter:saturate(.6); cursor:not-allowed;
  }

  /* topo resultados */
  .top{
    background:var(--card); border:1px solid var(--line); border-radius:16px; padding:16px;
  }
  .tabs{display:flex; gap:14px; margin-top:14px}
  .tab{
    flex:1; background:var(--card); border:2px solid #cfe0ef; border-radius:14px; padding:14px;
    text-align:center; font-weight:800; color:#0b3b74; box-shadow:0 8px 16px rgba(10,35,60,.06);
  }
  .tab.is-active{outline:3px solid #bee2ff}

  .compare{
    background:var(--card); border:1px solid var(--line); border-radius:16px; padding:12px; margin-top:14px;
  }
  .compare .row{display:grid; grid-template-columns:100px repeat(5,1fr); gap:10px; align-items:center; padding:6px 0}
  .badge{display:inline-flex; gap:6px; align-items:center; background:var(--chip); border:1px solid #cfe0ef; border-radius:999px; padding:4px 10px; font-weight:700}
  .score{background:#e9fbef; color:#0e7b3b; padding:2px 6px; border-radius:6px; font-weight:800}

  /* cards de voos */
  .card{
    background:var(--card); border:1px solid var(--line); border-radius:16px; padding:16px;
    display:grid; grid-template-columns:120px 1fr 1fr 120px 160px; align-items:center; gap:12px; margin-top:14px;
  }
  @media (max-width:900px){
    .card{grid-template-columns:1fr 1fr; grid-auto-rows:auto}
  }
  .plane-ico{font-size:34px}
  .chunk h3{margin:0 0 2px 0; font-size:26px; letter-spacing:.4px}
  .sub{color:var(--muted); font-weight:600}
  .big{font-size:30px; font-weight:900; text-align:center}
  .btn-seat{
    border:0; background:#106fb6; color:#fff; font-weight:800; padding:12px 18px; border-radius:999px; cursor:pointer;
  }
  .price-col{text-align:center}
  .price-col .price{font-size:34px; font-weight:900}
  .buy{border:0; background:#ff8a50; color:#fff; font-weight:900; padding:14px 18px; border-radius:999px; cursor:pointer}

  .bar{height:1px;background:var(--line);margin:12px 0}
  .muted{color:var(--muted)}


    /* === Passsageiros & Classe - popover === */
  .pax-wrap{ position:relative; }
  .pax-pop{
    position:absolute; top:100%; left:0; margin-top:8px; width:320px;
    background:#fff; color:var(--ink);
    border:1px solid var(--line); border-radius:14px; padding:14px;
    box-shadow:0 16px 32px rgba(10,35,60,.18); z-index:60; display:none;
  }
  .pax-pop.is-open{ display:block; }
  .pax-row{ display:flex; align-items:center; justify-content:space-between; gap:10px; padding:8px 0; }
  .pax-row .lbl{ font-weight:700; }
  .stepper{ display:flex; align-items:center; gap:10px; }
  .stepper button{
    width:32px; height:32px; border-radius:10px; border:1px solid var(--line);
    background:#f4f8fc; cursor:pointer; font-weight:800;
  }
  .stepper .num{ min-width:22px; text-align:center; font-weight:800; }
  .pax-pop hr{ border:0; height:1px; background:var(--line); margin:12px 0; }
  .cabins{ display:grid; grid-template-columns:1fr; gap:8px; }
  .cabins label{ display:flex; align-items:center; gap:10px; padding:8px; border:1px solid var(--line); border-radius:10px; }
  .pax-actions{ display:flex; justify-content:flex-end; gap:8px; margin-top:12px; }
  .pax-actions .btn-ghost{
    background:transparent; border:1px solid var(--line); border-radius:10px; padding:8px 12px; cursor:pointer;
  }
  .pax-actions .btn-apply{
    background:var(--accent); color:#fff; border:0; border-radius:10px; padding:8px 14px; cursor:pointer; font-weight:800;
  }

  /* deixa o campo parecer clic√°vel */
  #paxField{ cursor:pointer; user-select:none; }
  #paxField:focus-visible{ outline:3px solid #bfe0ff; outline-offset:2px; }


</style>
</head>
<body>
<div class="wrap grid">

  <!-- LATERAL -->
  <aside class="panel">
    <h2>Passagens A√©reas</h2>
    <div class="seg">
      <button id="btnRT" class="is-active" type="button">Ida e Volta</button>
      <button id="btnOW" type="button">S√≥ ida</button>
    </div>

    <div class="field" id="f-origem">
      <small>Origem</small>
      <div><span id="origemTxt">‚Äî</span>
        <button class="swap" title="Inverter" id="swapBtn">‚Üï</button>
      </div>
    </div>

    <div class="field" id="f-destino">
      <small>Destino</small>
      <div id="destinoTxt">‚Äî</div>
    </div>

    <!-- Caixinhas de data (bot√µes) -->
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
      <!-- IDA -->
      <div class="pill-date" id="boxIda" role="button" aria-label="Selecionar data de ida" tabindex="0">
        <div class="pill-head">Ida</div>
        <div class="pill-value" id="idaTxt">‚Äî</div>
        <input id="inpIda" class="pill-date__input" type="date" />
      </div>

      <!-- VOLTA -->
      <div class="pill-date" id="boxVolta" role="button" aria-label="Selecionar data de volta" tabindex="0">
        <div class="pill-head">Volta</div>
        <div class="pill-value" id="voltaTxt">‚Äî</div>
        <input id="inpVolta" class="pill-date__input" type="date" />
      </div>
    </div>

    <div class="toggle">
      <div class="switch is-on"></div>
      <div>Buscar pelo mais barato</div>
    </div>

  <div class="pax-wrap">
    <div class="field" id="paxField" role="button" tabindex="0" aria-haspopup="dialog" aria-expanded="false">
      <small>Passageiros e Classe</small>
      <div id="paxSummary">1 pessoa ¬∑ Econ√¥mica</div>
    </div>

    <div class="pax-pop" id="paxPop" role="dialog" aria-label="Selecionar passageiros e classe">
      <div class="pax-row">
        <div class="lbl">Adultos</div>
        <div class="stepper">
          <button type="button" id="adMenos">‚àí</button>
          <span class="num" id="adNum">1</span>
          <button type="button" id="adMais">+</button>
        </div>
      </div>
      <div class="pax-row">
        <div class="lbl">Idosos</div>
        <div class="stepper">
          <button type="button" id="idMenos">‚àí</button>
          <span class="num" id="idNum">0</span>
          <button type="button" id="idMais">+</button>
        </div>
      </div>
      <div class="pax-row">
        <div class="lbl">Crian√ßas</div>
        <div class="stepper">
          <button type="button" id="chMenos">‚àí</button>
          <span class="num" id="chNum">0</span>
          <button type="button" id="chMais">+</button>
        </div>
      </div>

    <hr>
    <div class="cabins">
      <label><input type="radio" name="cabin" value="Econ√¥mica" checked> Econ√¥mica</label>
      <label><input type="radio" name="cabin" value="Executiva"> Executiva</label>
      <label><input type="radio" name="cabin" value="Primeira Classe"> Primeira Classe</label>
    </div>

    <div class="pax-actions">
      <button type="button" class="btn-ghost" id="paxCancel">Cancelar</button>
      <button type="button" class="btn-apply" id="paxApply">Aplicar</button>
    </div>
  </div>
</div>


    <button class="btn" id="refazerBusca">üîé Buscar</button>
  </aside>

  <!-- CONTE√öDO -->
  <main>
    <div class="top">
      <div class="muted" id="titulos">Voos ida e volta</div>

      <div class="compare">
        <div class="row">
          <div></div>
          <div class="badge"><img alt="" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16'><circle cx='8' cy='8' r='8' fill='%23d00'/></svg>">Avianca</div>
        <div class="badge"><img alt="" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16'><rect width='16' height='16' fill='%23006'/></svg>">Delta</div>
          <div class="badge">GOL</div>
          <div class="badge">LATAM</div>
          <div class="badge">United</div>
        </div>
        <div class="row">
          <div class="muted">Direto</div>
          <div><span class="score">6,5</span> Bom ¬∑ R$ 5.490</div>
          <div><span class="score">7,9</span> Muito Bom ¬∑ R$ 6.223</div>
          <div><span class="score">7,7</span> Muito Bom ¬∑ R$ 6.223</div>
          <div><span class="score">7,8</span> Muito Bom ¬∑ R$ 6.980</div>
          <div><span class="score">7,5</span> Muito Bom ¬∑ R$ 5.350</div>
        </div>
        <div class="row">
          <div class="muted">Com paradas</div>
          <div><b style="color:#0a8f3e">R$ 4.970</b></div>
          <div>R$ 5.130</div>
          <div>R$ 6.150</div>
          <div>R$ 6.100</div>
          <div>R$ 5.450</div>
        </div>
      </div>

      <div class="tabs">
        <div class="tab is-active">Recomendados<br><span class="muted">R$ 5.807</span></div>
        <div class="tab">Mais Baratos<br><span class="muted">R$ 4.970</span></div>
        <div class="tab">Mais R√°pidos<br><span class="muted">R$ 6.230</span></div>
      </div>
    </div>

    <!-- CARD 1 - IDA -->
    <article class="card">
      <div class="plane-ico">‚úàÔ∏è</div>
      <div class="chunk">
        <h3>IDA</h3>
        <div class="sub" id="idaSub">‚Äî</div>
      </div>
      <div>
        <div class="big" id="origemCode">GRU</div>
        <div class="sub" id="origemCity">S√£o Paulo</div>
      </div>
      <div>
        <div class="big" id="destinoCode">EWR</div>
        <div class="sub" id="destinoCity">New York</div>
      </div>
      <div class="price-col">
        <div class="price">R$ -</div>
        <button class="btn-seat">Assento</button>
      </div>
      <div class="bar" style="grid-column:1/-1"></div>
      <div class="muted" style="grid-column:1/-1">1 Adulto ¬∑ Impostos, taxas e encargos</div>
    </article>

    <!-- CARD 2 - VOLTA -->
    <article class="card" id="cardVolta">
      <div class="plane-ico">‚úàÔ∏è</div>
      <div class="chunk">
        <h3>VOLTA</h3>
        <div class="sub" id="voltaSub">‚Äî</div>
      </div>
      <div>
        <div class="big" id="origemCode2">GRU</div>
        <div class="sub" id="origemCity2">S√£o Paulo</div>
      </div>
      <div>
        <div class="big" id="destinoCode2">EWR</div>
        <div class="sub" id="destinoCity2">New York</div>
      </div>
      <div class="price-col">
        <div class="muted">R$ -</div>
        <button class="btn-seat">Assento</button>
      </div>
      <div style="grid-column:1/-1; display:flex; justify-content:flex-end; gap:16px; align-items:center; margin-top:4px">
        <div class="muted">R$ -</div>
        <button class="buy">Comprar</button>
      </div>
    </article>

  </main>
</div>

<script>
  // ---------- utils ----------
  const url = new URLSearchParams(location.search);
  const getQS = (k, def="") => url.get(k) ?? def;

  function fmtDataISO(iso){
    if(!iso) return "‚Äî";
    const d = new Date(iso + "T12:00:00");
    return d.toLocaleDateString("pt-BR", {
      weekday:"short", day:"2-digit", month:"short", year:"numeric"
    }).replace(/\.$/,"");
  }
  function cidadeSemPais(txt){
    return (txt||"").replace(/\s*-\s*[A-Z]{2,}.*$/,"");
  }
  function guessIATA(txt){
    txt = (txt||"").toLowerCase();
    if (txt.includes("s√£o paulo")||txt.includes("sao paulo")) return "GRU";
    if (txt.includes("rio de janeiro")) return "GIG";
    if (txt.includes("new york")||txt.includes("nova iorque")) return "EWR";
    if (txt.includes("bras√≠lia")||txt.includes("brasilia")) return "BSB";
    return "XXX";
  }
  const todayISO = (()=>{ const d=new Date(), p=n=>String(n).padStart(2,'0');
    return `${d.getFullYear()}-${p(d.getMonth()+1)}-${p(d.getDate())}`; })();

  // ---------- estado vindo da p√°gina anterior ----------
  let origem   = getQS("origem","S√£o Paulo, SP - BR");
  let destino  = getQS("destino","New York, NY - USA");
  let idaISO   = getQS("data","");      // ida
  let voltaISO = getQS("volta","");     // volta (se houver)
  let modo     = getQS("modo","rt");    // 'rt' ida e volta | 'ow' s√≥ ida

  // ---------- refs DOM ----------
  const origemTxt = document.getElementById("origemTxt");
  const destinoTxt= document.getElementById("destinoTxt");
  const boxIda    = document.getElementById("boxIda");
  const boxVolta  = document.getElementById("boxVolta");
  const inpIda    = document.getElementById("inpIda");
  const inpVolta  = document.getElementById("inpVolta");
  const idaTxt    = document.getElementById("idaTxt");
  const voltaTxt  = document.getElementById("voltaTxt");
  const titulos   = document.getElementById("titulos");
  const cardVolta = document.getElementById("cardVolta");
  const btnRT     = document.getElementById("btnRT");
  const btnOW     = document.getElementById("btnOW");

  // ---------- preenche painel ----------
  origemTxt.textContent  = origem;
  destinoTxt.textContent = destino;
  inpIda.min = todayISO;
  inpVolta.min = todayISO;

  if (idaISO){ inpIda.value = idaISO; idaTxt.textContent = fmtDataISO(idaISO); inpVolta.min = idaISO; }
  if (voltaISO){ inpVolta.value = voltaISO; voltaTxt.textContent = fmtDataISO(voltaISO); }

  // ---------- cards ----------
  function atualizaCards(){
    const oCity = cidadeSemPais(origem).split(",")[0] || "‚Äî";
    const dCity = cidadeSemPais(destino).split(",")[0] || "‚Äî";
    const oIATA = guessIATA(origem);
    const dIATA = guessIATA(destino);

    document.getElementById("idaSub").textContent       = idaISO ? fmtDataISO(idaISO) : "‚Äî";
    document.getElementById("origemCode").textContent   = oIATA;
    document.getElementById("origemCity").textContent   = oCity;
    document.getElementById("destinoCode").textContent  = dIATA;
    document.getElementById("destinoCity").textContent  = dCity;

    document.getElementById("voltaSub").textContent     = voltaISO ? fmtDataISO(voltaISO) : "‚Äî";
    document.getElementById("origemCode2").textContent  = oIATA;
    document.getElementById("origemCity2").textContent  = oCity;
    document.getElementById("destinoCode2").textContent = dIATA;
    document.getElementById("destinoCity2").textContent = dCity;
  }
  atualizaCards();

  // ---------- abrir datepicker ----------
  function openPicker(inputEl){
    if (!inputEl) return;
    if (typeof inputEl.showPicker === "function"){
      try { inputEl.showPicker(); return; } catch(_) {}
    }
    inputEl.focus();
    try { inputEl.click(); } catch(_) {}
    setTimeout(()=> {
      inputEl.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowDown", altKey:true, bubbles:true, cancelable:true}));
    },0);
  }

  // ---------- sincroniza URL ----------
  function syncQS(){
    const p = new URLSearchParams(location.search);
    p.set("origem", origem);
    p.set("destino", destino);
    p.set("modo",   modo);
    idaISO   ? p.set("data",  idaISO)   : p.delete("data");
    (voltaISO && modo==='rt') ? p.set("volta", voltaISO) : p.delete("volta");
    history.replaceState(null, "", location.pathname + "?" + p.toString());
  }

  // ---------- intera√ß√µes ----------
  // p√≠lulas como bot√µes
  boxIda.addEventListener("click",  ()=> openPicker(inpIda));
  boxVolta.addEventListener("click",()=> { if(modo==='rt') openPicker(inpVolta); });

  boxIda.addEventListener("keydown",  e=>{ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); openPicker(inpIda);} });
  boxVolta.addEventListener("keydown",e=>{ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); if(modo==='rt') openPicker(inpVolta);} });

  // escolher datas
  inpIda.addEventListener("change", ()=>{
    idaISO = inpIda.value || "";
    idaTxt.textContent = fmtDataISO(idaISO);
    inpVolta.min = idaISO || todayISO;
    if (voltaISO && voltaISO < idaISO){
      voltaISO = ""; inpVolta.value = ""; voltaTxt.textContent = "‚Äî";
    }
    atualizaCards(); syncQS();
  });
  inpVolta.addEventListener("change", ()=>{
    voltaISO = inpVolta.value || "";
    voltaTxt.textContent = fmtDataISO(voltaISO);
    atualizaCards(); syncQS();
  });

  // inverter origem/destino
  document.getElementById("swapBtn").addEventListener("click", ()=>{
    [origem, destino] = [destino, origem];
    origemTxt.textContent = origem;
    destinoTxt.textContent = destino;
    atualizaCards(); syncQS();
  });

  // bot√£o "Buscar" ‚Äî volta para a p√°gina anterior levando o estado
  document.getElementById("refazerBusca").addEventListener("click", ()=>{
    const params = new URLSearchParams({
      origem, destino, data: idaISO || "", volta: (modo==='rt' ? (voltaISO||"") : "")
    }).toString();
    window.location.href = "index.html?" + params;
  });

  // ---------- MODO: S√≥ ida / Ida e Volta ----------
  function setTripMode(newMode){
    modo = newMode;
    btnRT.classList.toggle('is-active', modo==='rt');
    btnOW.classList.toggle('is-active', modo==='ow');

    if (modo === 'ow'){
      // desativa/oculta volta
      cardVolta.style.display = 'none';
      boxVolta.classList.add('is-disabled');
      inpVolta.disabled = true;
      // limpa volta
      voltaISO = '';
      inpVolta.value = '';
      voltaTxt.textContent = '‚Äî';
      titulos.textContent = 'Voos s√≥ ida';
    } else {
      // reativa volta
      cardVolta.style.display = '';
      boxVolta.classList.remove('is-disabled');
      inpVolta.disabled = false;
      titulos.textContent = 'Voos ida e volta';
    }
    atualizaCards(); syncQS();
  }

  // cliques dos bot√µes
  btnOW.addEventListener('click', ()=> setTripMode('ow'));
  btnRT.addEventListener('click', ()=> setTripMode('rt'));

  // aplica modo vindo da URL ao carregar
  setTripMode(modo === 'ow' ? 'ow' : 'rt');

  // --------- Passageiros & Classe ----------
  const paxField   = document.getElementById('paxField');
  const paxPop     = document.getElementById('paxPop');
  const paxSummary = document.getElementById('paxSummary');

  // estado
  const pax = { adultos: 1, idosos: 0, criancas: 0 };
  let cabin = 'Econ√¥mica';

  function plural(n, s, p){ return n===1 ? s : p; }
  function renderSummary(){
    const total = pax.adultos + pax.idosos + pax.criancas;
    const g = total === 1 ? 'pessoa' : 'pessoas';
    paxSummary.textContent = `${total} ${g} ¬∑ ${cabin}`;
  }
  renderSummary();

  // abre/fecha
  function togglePax(open){
    const isOpen = (open===undefined) ? paxPop.classList.contains('is-open') : !open;
    if (isOpen){ paxPop.classList.remove('is-open'); paxField.setAttribute('aria-expanded','false'); }
    else { paxPop.classList.add('is-open'); paxField.setAttribute('aria-expanded','true'); }
  }
  paxField.addEventListener('click', ()=> togglePax(true));
  paxField.addEventListener('keydown', e=>{
    if (e.key==='Enter' || e.key===' ') { e.preventDefault(); togglePax(true); }
  });

  // fechar ao clicar fora / Esc
  document.addEventListener('click', (e)=>{
    if (!paxPop.contains(e.target) && !paxField.contains(e.target)) {
      paxPop.classList.remove('is-open'); paxField.setAttribute('aria-expanded','false');
    }
  });
  document.addEventListener('keydown', (e)=>{
    if (e.key==='Escape') { paxPop.classList.remove('is-open'); paxField.setAttribute('aria-expanded','false'); }
  });

  // steppers
  function bindStepper(minusId, plusId, key){
    const minus = document.getElementById(minusId);
    const plus  = document.getElementById(plusId);
    const numEl = document.getElementById(key==='adultos'?'adNum': key==='idosos'?'idNum':'chNum');

    minus.addEventListener('click', ()=>{
      pax[key] = Math.max(0, pax[key]-1);
      numEl.textContent = pax[key];
    });
    plus.addEventListener('click', ()=>{
      pax[key] = Math.min(9, pax[key]+1);
      numEl.textContent = pax[key];
    });
  }
  bindStepper('adMenos','adMais','adultos');
  bindStepper('idMenos','idMais','idosos');
  bindStepper('chMenos','chMais','criancas');

  // cabine
  document.querySelectorAll('input[name="cabin"]').forEach(r=>{
    r.addEventListener('change', ()=> { cabin = r.value; });
  });

  // aplicar/cancelar
  document.getElementById('paxApply').addEventListener('click', ()=>{
    // garante pelo menos 1 passageiro
    if (pax.adultos + pax.idosos + pax.criancas === 0) { pax.adultos = 1; document.getElementById('adNum').textContent = 1; }
    renderSummary();
    paxPop.classList.remove('is-open');
    paxField.setAttribute('aria-expanded','false');

    // (opcional) salvar na URL junto com o resto do estado:
    // if (typeof history !== 'undefined') {
    //   const p = new URLSearchParams(location.search);
    //   p.set('ad', pax.adultos); p.set('id', pax.idosos); p.set('ch', pax.criancas); p.set('cab', cabin);
    //   history.replaceState(null,'',location.pathname+'?'+p.toString());
    // }
  });
  document.getElementById('paxCancel').addEventListener('click', ()=>{
    paxPop.classList.remove('is-open');
    paxField.setAttribute('aria-expanded','false');
  });



</script>

</body>
</html>
